#!/usr/bin/env node
const pkg = require('../package.json');
const chalk = require('chalk');
const path = require('path');

const prefix = '[' + pkg.name + ']\t';
const getDeltaTime = time => new Date().getTime() - time;


module.exports.transpileSuccess = (src, dist, dt) => {
  const msg = prefix + chalk.green('%s: successfully transpiled to "%s" (%sms)');
  console.log(msg, src.rel, dist.rel, dt);
}

module.exports.transpileError = (src, err) => {
  const msg = prefix + chalk.red('%s');
  const content = err.message.replace(src.abs, src.rel);
  console.log(msg, content);
  console.log(err.codeFrame);
}

module.exports.copyFileSuccess = (file, dist, dt) => {
  const msg = prefix + chalk.green('%s: successfully copied to "%s" (%sms)');
  console.log(msg, file.rel, dist.rel, dt);
}

module.exports.copyFileError = (file, err) => {
  const msg = prefix + chalk.red('error copying %s');
  console.log(msg, file.rel);
  console.error(err.stack);
}

module.exports.deleteFileSuccess = (file) => {
  const msg = prefix + chalk.yellow('%s: successfully deleted');
  console.log(msg, file.rel);
}

module.exports.deleteFileError = (file, err) => {
  const msg = prefix + chalk.red('error deleting %s');
  console.log(msg, file.rel);
  console.error(err.stack);
}

module.exports.bundleSuccess = (src, dist, dt) => {
  const msg = prefix + chalk.green('%s: successfully created (%sms)');
  console.log(msg, dist.rel, dt);
}

module.exports.bundleError = (src, err) => {
  const msg = prefix + chalk.red(`${err.message}`);
  console.log(msg);
  console.error(err.stack);
}

module.exports.sassSuccess = (src, dist, dt) => {
  const msg = prefix + chalk.green('%s: successfully created (%sms)');
  console.log(msg, dist.rel, dt);
}

module.exports.sassError = (src, err) => {
  const msg = prefix + chalk.red(`error processing sass file: "${src.rel}"`);
  console.log(msg);
  console.error(err.formatted);
}

module.exports.minifySuccess = (src, dist, dt) => {
  const msg = prefix + chalk.green('%s: successfully minified to "%s" (%sms)');
  console.log(msg, src.rel, dist.rel, dt);
}

module.exports.minifyError = (src, err) => {
  const msg = prefix + chalk.red(`${err.message}`);
  console.log(msg);
  console.error(err.stack);
}

module.exports.processStart = function(name) {
  console.log(prefix + chalk.cyan(`${name} start`));
}

module.exports.processStop = function(name) {
  console.log(prefix + chalk.cyan(`${name} stop`));
}

module.exports.processError = function(name, err) {
  console.log(prefix + chalk.red(`${name} error`));
  console.error(err.stack);
}
